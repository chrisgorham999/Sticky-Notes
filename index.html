<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chris's Sticky Notes App</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons as inline SVG components
        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Edit2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
        );

        const Check = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const LogOut = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        );

        const Moon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        );

        const Sun = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        );

        const ChevronDown = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        );

        const ChevronRight = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );

        function StickyNotesApp() {
            const [currentUser, setCurrentUser] = useState(null);
            const [loginUsername, setLoginUsername] = useState('');
            const [loginPassword, setLoginPassword] = useState('');
            const [isSignup, setIsSignup] = useState(false);
            const [loginError, setLoginError] = useState('');
            const [darkMode, setDarkMode] = useState(false);
            
            const [notes, setNotes] = useState([]);
            const [nextId, setNextId] = useState(1);
            const [colorLabels, setColorLabels] = useState({
                'bg-yellow-200': 'Ideas',
                'bg-pink-200': 'Important',
                'bg-blue-200': 'Tasks',
                'bg-green-200': 'Done',
                'bg-purple-200': 'Questions',
                'bg-orange-200': 'Urgent'
            });
            const [editingLabel, setEditingLabel] = useState(null);
            const [tempLabel, setTempLabel] = useState('');
            const [collapsedCategories, setCollapsedCategories] = useState({});

            const colors = [
                'bg-yellow-200',
                'bg-pink-200',
                'bg-blue-200',
                'bg-green-200',
                'bg-purple-200',
                'bg-orange-200'
            ];

            useEffect(() => {
                if (currentUser) {
                    loadUserData(currentUser);
                }
            }, [currentUser]);

            useEffect(() => {
                if (currentUser) {
                    saveUserData(currentUser, notes, colorLabels, nextId);
                }
            }, [notes, colorLabels, nextId, currentUser]);

            const loadUserData = (username) => {
                const userData = JSON.parse(localStorage.getItem(`user_${username}`) || '{}');
                setNotes(userData.notes || []);
                setColorLabels(userData.colorLabels || {
                    'bg-yellow-200': 'Ideas',
                    'bg-pink-200': 'Important',
                    'bg-blue-200': 'Tasks',
                    'bg-green-200': 'Done',
                    'bg-purple-200': 'Questions',
                    'bg-orange-200': 'Urgent'
                });
                setNextId(userData.nextId || 1);
                setCollapsedCategories(userData.collapsedCategories || {});
            };

            const saveUserData = (username, notes, colorLabels, nextId) => {
                const userData = { notes, colorLabels, nextId, collapsedCategories };
                localStorage.setItem(`user_${username}`, JSON.stringify(userData));
            };

            const handleLogin = (e) => {
                e.preventDefault();
                setLoginError('');
                
                if (!loginUsername || !loginPassword) {
                    setLoginError('Please enter both username and password');
                    return;
                }

                const users = JSON.parse(localStorage.getItem('users') || '{}');
                
                if (isSignup) {
                    if (users[loginUsername]) {
                        setLoginError('Username already exists');
                        return;
                    }
                    users[loginUsername] = loginPassword;
                    localStorage.setItem('users', JSON.stringify(users));
                    setCurrentUser(loginUsername);
                    setLoginUsername('');
                    setLoginPassword('');
                } else {
                    if (users[loginUsername] === loginPassword) {
                        setCurrentUser(loginUsername);
                        setLoginUsername('');
                        setLoginPassword('');
                    } else {
                        setLoginError('Invalid username or password');
                    }
                }
            };

            const handleLogout = () => {
                setCurrentUser(null);
                setNotes([]);
                setNextId(1);
                setColorLabels({
                    'bg-yellow-200': 'Ideas',
                    'bg-pink-200': 'Important',
                    'bg-blue-200': 'Tasks',
                    'bg-green-200': 'Done',
                    'bg-purple-200': 'Questions',
                    'bg-orange-200': 'Urgent'
                });
                setCollapsedCategories({});
            };

            const addNote = () => {
                const newNote = {
                    id: nextId,
                    text: '',
                    color: colors[0],
                    position: { x: Math.random() * 200, y: Math.random() * 100 }
                };
                setNotes([...notes, newNote]);
                setNextId(nextId + 1);
            };

            const deleteNote = (id) => {
                setNotes(notes.filter(note => note.id !== id));
            };

            const updateNoteText = (id, text) => {
                setNotes(notes.map(note => 
                    note.id === id ? { ...note, text } : note
                ));
            };

            const updateNoteColor = (id, color) => {
                setNotes(notes.map(note => 
                    note.id === id ? { ...note, color } : note
                ));
            };

            const startEditingLabel = (color) => {
                setEditingLabel(color);
                setTempLabel(colorLabels[color]);
            };

            const saveLabel = (color) => {
                setColorLabels({ ...colorLabels, [color]: tempLabel });
                setEditingLabel(null);
            };

            const toggleCategory = (color) => {
                setCollapsedCategories({
                    ...collapsedCategories,
                    [color]: !collapsedCategories[color]
                });
            };

            const groupedNotes = colors.reduce((acc, color) => {
                acc[color] = notes.filter(note => note.color === color);
                return acc;
            }, {});

            if (!currentUser) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                            <h1 className="text-3xl font-bold text-gray-800 mb-6 text-center">
                                Chris's Sticky Notes App
                            </h1>
                            <form onSubmit={handleLogin} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Username
                                    </label>
                                    <input
                                        type="text"
                                        value={loginUsername}
                                        onChange={(e) => setLoginUsername(e.target.value)}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
                                        placeholder="Enter username"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Password
                                    </label>
                                    <input
                                        type="password"
                                        value={loginPassword}
                                        onChange={(e) => setLoginPassword(e.target.value)}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
                                        placeholder="Enter password"
                                    />
                                </div>
                                {loginError && (
                                    <p className="text-red-500 text-sm">{loginError}</p>
                                )}
                                <button
                                    type="submit"
                                    className="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-medium transition-colors"
                                >
                                    {isSignup ? 'Sign Up' : 'Login'}
                                </button>
                            </form>
                            <div className="mt-4 text-center">
                                <button
                                    onClick={() => {
                                        setIsSignup(!isSignup);
                                        setLoginError('');
                                    }}
                                    className="text-blue-500 hover:text-blue-600 text-sm"
                                >
                                    {isSignup ? 'Already have an account? Login' : "Don't have an account? Sign Up"}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className={`min-h-screen p-8 ${darkMode ? 'bg-gradient-to-br from-gray-900 to-gray-800' : 'bg-gradient-to-br from-gray-100 to-gray-200'}`}>
                    <div className="max-w-7xl mx-auto">
                        <div className="flex items-center justify-between mb-4">
                            <div>
                                <h1 className={`text-4xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>Chris's Sticky Notes App</h1>
                                <p className={`text-sm mt-1 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>Welcome, {currentUser}!</p>
                            </div>
                            <div className="flex gap-3">
                                <button
                                    onClick={addNote}
                                    className="flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg transition-colors"
                                >
                                    <Plus size={20} />
                                    New Note
                                </button>
                                <button
                                    onClick={() => setDarkMode(!darkMode)}
                                    className="flex items-center gap-2 bg-gray-700 hover:bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg transition-colors"
                                >
                                    {darkMode ? <Sun size={20} /> : <Moon size={20} />}
                                </button>
                                <button
                                    onClick={handleLogout}
                                    className="flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg shadow-lg transition-colors"
                                >
                                    <LogOut size={20} />
                                    Logout
                                </button>
                            </div>
                        </div>

                        {/* Compact Color Legend */}
                        <div className={`rounded-lg shadow-md p-3 mb-6 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                            <div className="flex flex-wrap items-center gap-4">
                                <span className={`text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-700'}`}>Legend:</span>
                                {colors.map(color => (
                                    <div key={color} className="flex items-center gap-1.5">
                                        <div className={`w-5 h-5 ${color} rounded border border-gray-300`}></div>
                                        {editingLabel === color ? (
                                            <div className="flex items-center gap-1">
                                                <input
                                                    type="text"
                                                    value={tempLabel}
                                                    onChange={(e) => setTempLabel(e.target.value)}
                                                    onKeyDown={(e) => e.key === 'Enter' && saveLabel(color)}
                                                    className="border border-gray-300 rounded px-1.5 py-0.5 text-xs w-20"
                                                    autoFocus
                                                />
                                                <button
                                                    onClick={() => saveLabel(color)}
                                                    className="text-green-600 hover:text-green-700"
                                                >
                                                    <Check size={12} />
                                                </button>
                                            </div>
                                        ) : (
                                            <div className="flex items-center gap-1">
                                                <span className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>{colorLabels[color]}</span>
                                                <button
                                                    onClick={() => startEditingLabel(color)}
                                                    className="text-gray-400 hover:text-gray-600"
                                                >
                                                    <Edit2 size={11} />
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Grouped Notes by Category */}
                        {colors.map(color => {
                            const categoryNotes = groupedNotes[color];
                            if (categoryNotes.length === 0) return null;

                            return (
                                <div key={color} className="mb-6">
                                    <button
                                        onClick={() => toggleCategory(color)}
                                        className={`flex items-center gap-2 w-full p-3 rounded-lg mb-3 transition-colors ${
                                            darkMode 
                                                ? 'bg-gray-800 hover:bg-gray-750 text-white' 
                                                : 'bg-white hover:bg-gray-50 text-gray-800'
                                        }`}
                                    >
                                        {collapsedCategories[color] ? <ChevronRight size={20} /> : <ChevronDown size={20} />}
                                        <div className={`w-6 h-6 ${color} rounded border-2 border-gray-300`}></div>
                                        <span className="font-semibold text-lg">{colorLabels[color]}</span>
                                        <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>({categoryNotes.length})</span>
                                    </button>

                                    {!collapsedCategories[color] && (
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                            {categoryNotes.map(note => (
                                                <div
                                                    key={note.id}
                                                    className={`${note.color} p-6 rounded-lg shadow-lg relative transform hover:scale-105 transition-transform`}
                                                    style={{ minHeight: '200px' }}
                                                >
                                                    <div className="absolute top-2 right-2 flex gap-2">
                                                        <select
                                                            value={note.color}
                                                            onChange={(e) => updateNoteColor(note.id, e.target.value)}
                                                            className="bg-white bg-opacity-70 border border-gray-300 rounded px-2 py-1 text-xs cursor-pointer"
                                                        >
                                                            {colors.map(c => (
                                                                <option key={c} value={c}>
                                                                    {colorLabels[c]}
                                                                </option>
                                                            ))}
                                                        </select>
                                                        <button
                                                            onClick={() => deleteNote(note.id)}
                                                            className="text-gray-600 hover:text-gray-800 transition-colors"
                                                        >
                                                            <X size={18} />
                                                        </button>
                                                    </div>
                                                    <textarea
                                                        value={note.text}
                                                        onChange={(e) => updateNoteText(note.id, e.target.value)}
                                                        placeholder="Type your note here..."
                                                        className="w-full h-full bg-transparent border-none outline-none resize-none text-gray-800 placeholder-gray-500 font-handwriting mt-8"
                                                        style={{ minHeight: '150px' }}
                                                    />
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            );
                        })}

                        {notes.length === 0 && (
                            <div className="text-center py-20">
                                <p className={`text-xl ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>No notes yet. Click "New Note" to get started!</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<StickyNotesApp />, document.getElementById('root'));
    </script>
</body>
</html>